---
title: 【笔记】你不知道的JS(上)-2.3对象
date: 2025-07-01 16:02:51
tags: JS
---

### **《你不知道的 JavaScript（上卷）》第二部分 第 3 章：对象 精要总结**

---

#### **一、对象基础**

1. **两种创建形式**：

   - 字面形式：`var obj = { key: value }`
   - 构造形式：`var obj = new Object()`（极少使用）

2. **JavaScript 的 6 大基本类型**：

   - `string`、`number`、`boolean`、`null`、`undefined`、`object`
   - **注意**：`null`被`typeof`错误返回为`"object"`（历史遗留 Bug）

3. **内建对象**（构造器形式）：
   - `String`、`Number`、`Boolean`、`Object`、`Function`、`Array`等
   - **自动装箱**：基本类型调用方法时（如`"abc".length`）会临时转为对象

---

#### **二、对象内容**

1. **属性访问**：

   - 点运算符（`obj.key`）要求合法标识符
   - 方括号（`obj["key"]`）支持任意 UTF-8 字符串

2. **计算属性名**（ES6）：

   ```javascript
   var prefix = "foo";
   var obj = {
     [prefix + "Bar"]: "hello", // 动态属性名
   };
   ```

3. **属性 vs 方法**：
   - 函数作为属性时仍为普通函数，无特殊"方法"语义
   - 方法调用时的`this`绑定是运行时行为（非定义时）

---

#### **三、属性描述符**

1. **核心属性**：

   ```javascript
   {
     value: 2,          // 属性值
     writable: true,    // 是否可修改
     enumerable: true,  // 是否可枚举（影响for..in）
     configurable: true // 是否可配置/删除
   }
   ```

2. **访问器属性**（getter/setter）：

   ```javascript
   var obj = {
     get a() {
       return this._a_;
     },
     set a(val) {
       this._a_ = val * 2;
     },
   };
   ```

3. **不变性控制**：
   - `Object.preventExtensions()`：禁止新增属性
   - `Object.seal()`：在 preventExtensions 基础上禁止配置
   - `Object.freeze()`：在 seal 基础上禁止修改值

---

#### **四、存在性与迭代**

1. **存在检查**：

   - `in`操作符：检查对象及其原型链
   - `hasOwnProperty()`：仅检查对象自身
   - `Object.keys()`：返回可枚举的自有属性

2. **迭代方式**：
   - `for..in`：遍历对象及其原型链的可枚举属性
   - `for..of`（ES6）：通过`@@iterator`迭代值
     ```javascript
     var arr = [1, 2, 3];
     arr[Symbol.iterator]().next(); // { value: 1, done: false }
     ```

---

#### **五、核心结论**

1. **对象本质**：键值对的动态集合，通过`[[Prototype]]`实现委托
2. **设计哲学**：
   - 属性访问触发`[[Get]]`/`[[Put]]`内部方法
   - 不同于类继承的拷贝，JS 采用原型委托机制
3. **现代实践**：
   - 优先使用字面量而非构造形式
   - 用`Object.defineProperty`精细控制属性
   - 不可变对象适合共享数据场景

**关联知识**：

- 第 5 章将深入`[[Prototype]]`链机制
- 第 6 章对比类与原型的设计差异
